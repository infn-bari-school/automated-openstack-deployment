---
default:
  - ntp
  - timezone
  - puppet::agent

ntp::enable: true
ntp::servers:
  - ntp.cnaf.infn.it iburst
  - pool.ntp.org

timezone::timezone: 'Europe/Rome'


puppet::agent::puppet_server: puppetmaster.school.cloud.ba.infn.it
puppet::agent::report: true
puppet::agent::puppet_run_interval: 5
puppet::agent::environment: production

cloud_school_hosts:
  'puppetmaster.school.cloud.ba.infn.it':
    ip: '172.20.0.73'
    host_aliases: ['puppetmaster']
  'ceph01.school.cloud.ba.infn.it':
    ip: '172.20.0.74'
    host_aliases: ['ceph01']
  'ceph02.school.cloud.ba.infn.it':
    ip: '172.20.0.75'
    host_aliases: ['ceph02']
  'ceph03.school.cloud.ba.infn.it':
    ip: '172.20.0.75'
    host_aliases: ['ceph03']


ceph_mon:
  '%{::hostname}':
    key: 'AQBxkvVU4F+VDBAArxUf+8s0LbxIxNrbyEC1kw=='
ceph_key:
  'client.admin':
    secret: 'AQDgL/hUSC2kLBAAnWJaSiqJG+YMk+XV9sapnw=='
    cap_mon: 'allow *'
    cap_osd: 'allow *'
    cap_mds: 'allow'
    inject: true
    inject_as_id: 'mon.'
    inject_keyring: '/var/lib/ceph/mon/ceph-%{::hostname}/keyring'
  'client.bootstrap-osd':
    secret: 'AQDlL/hUUCpdFBAAZeo6mKj4yeKPmVKfUY5awA=='
    cap_mon: 'allow profile bootstrap-osd'
    keyring_path: '/var/lib/ceph/bootstrap-osd/ceph.keyring'
    inject: true
    inject_as_id: 'mon.'
    inject_keyring: '/var/lib/ceph/mon/ceph-%{::hostname}/keyring'
  'client.cinder':
    secret: 'AQAvxQpVKJ03KxAADFv78tedrAWZx1SoRdsQUA=='
    cap_mon: 'allow r'
    cap_osd: 'allow class-read object_prefix rbd_children, allow rwx pool=cephPuppetDeployed, allow rwx pool=vms, allow rx pool=images'
    mode: '644'
    inject: true
    inject_as_id: 'mon.'
    inject_keyring: '/var/lib/ceph/mon/ceph-%{::hostname}/keyring'


ceph_pools:
  volumes:
    pg_num: 30
  images:
    pg_num: 30
  vms:
    pg_num: 30
